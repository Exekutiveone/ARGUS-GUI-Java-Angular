<div class="controls-panel">
  <div class="mode-switches">
    <div class="mode-group">
      <span class="label">Fahrmodus</span>
      <div class="options">
        <button
          *ngFor="let mode of driveModes"
          type="button"
          [class.active]="mode === driveMode"
          (click)="selectDriveMode(mode)"
        >
          {{ mode }}
        </button>
      </div>
    </div>

    <div class="mode-group">
      <span class="label">Lenkmodus</span>
      <div class="options">
        <button
          *ngFor="let mode of steeringModes"
          type="button"
          [class.active]="mode === steeringMode"
          (click)="selectSteeringMode(mode)"
        >
          {{ mode }}
        </button>
      </div>
    </div>
  </div>

  <div class="feedback">
    <div class="status">
      <span class="dot" [class.online]="controllerConnected"></span>
      {{ controllerConnected ? 'Controller verbunden' : 'Controller nicht verbunden' }}
    </div>

    <div class="gamepad">
      <div class="sticks">
        <div class="stick">
          <div class="ring">
            <div class="stick-indicator" [ngStyle]="stickStyle(leftStick)"></div>
            <div class="center"></div>
          </div>
          <small>Linker Stick</small>
        </div>
        <div class="stick">
          <div class="ring">
            <div class="stick-indicator" [ngStyle]="stickStyle(rightStick)"></div>
            <div class="center"></div>
          </div>
          <small>Rechter Stick</small>
        </div>
      </div>

      <div class="triggers">
        <div class="trigger">
          <span class="trigger-label">L2</span>
          <div class="trigger-track">
            <div class="trigger-fill brake" [style.width.%]="brakeLevel"></div>
          </div>
          <small>{{ brakeLevel }}%</small>
        </div>
        <div class="trigger">
          <span class="trigger-label">R2</span>
          <div class="trigger-track">
            <div class="trigger-fill throttle" [style.width.%]="throttleLevel"></div>
          </div>
          <small>{{ throttleLevel }}%</small>
        </div>
      </div>

      <div class="light-status">
        <div class="light" [class.active]="ledFrontActive">
          <span class="indicator" [class.on]="ledFrontActive"></span>
          <span>LED Front</span>
        </div>
        <div class="light" [class.active]="ledSweepActive">
          <span class="indicator" [class.on]="ledSweepActive"></span>
          <span>LED Schwenk</span>
        </div>
        <div class="light" [class.active]="laserFrontActive">
          <span class="indicator laser" [class.on]="laserFrontActive"></span>
          <span>Laser Front</span>
        </div>
        <div class="light" [class.active]="laserSweepActive">
          <span class="indicator laser" [class.on]="laserSweepActive"></span>
          <span>Laser Schwenk</span>
        </div>
        <div class="intensity">
          <span>LED Intensit√§t</span>
          <div class="intensity-bar">
            <div class="intensity-fill" [style.width.%]="ledIntensity"></div>
          </div>
          <small>{{ ledIntensity }}%</small>
        </div>
      </div>
    </div>
  </div>
</div>
